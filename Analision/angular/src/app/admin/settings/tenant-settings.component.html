<div [@routerTransition]>
    <sub-header [title]="'Settings' | localize" [description]="'SettingsHeaderInfo' | localize"></sub-header>

    <div [class]="containerClass">
        <div class="card card-custom gutter-b">
            <div class="card-body">
                @if (settings) {
                    <tabset>
                        @if (showTimezoneSelection) {
                            <tab class="p-5" heading="{{ 'General' | localize }}" [active]="activeTabIndex == 0">
                                @if (showTimezoneSelection) {
                                    <div class="mb-5">
                                        <label for="Timezone" class="form-label">{{ 'Timezone' | localize }}</label>
                                        <timezone-combo
                                            name="Timezone"
                                            [(ngModel)]="settings.general.timezone"
                                            defaultTimezoneScope="{{ defaultTimezoneScope }}"></timezone-combo>
                                    </div>
                                }
                            </tab>
                        }
                        @if (true) {
                            <tab class="p-5" heading="{{ 'Appearance' | localize }}" [active]="activeTabIndex == 1">
                                <div class="row m-form">
                                    <div class="col-md-6">
                                        <div class="col-md-8 p-3 upload-logo-dark border border-3">
                                            <h6 class="mt-5">{{ 'ApplicationDarkLogo' | localize }}</h6>
                                            <form #logoUploadForm>
                                                <div class="row mx-0">
                                                    <div class="mb-5 brand-dark-logo-preview-area pl-0 col p-2">
                                                        <a [href]="darkLogoUrl" target="_blank">
                                                            <img height="38" [src]="darkLogoUrl" />
                                                        </a>
                                                    </div>
                                                    <div class="col text-end">
                                                        <button
                                                            type="submit"
                                                            class="btn btn-primary p-0"
                                                            tooltip="{{ 'UploadLogo_Info' | localize }}">
                                                            <span class="fileinput-button p-3">
                                                                <input
                                                                    type="file"
                                                                    #darkLogoUploaderFileInput
                                                                    ng2FileSelect
                                                                    [uploader]="darkLogoUploader"
                                                                    (change)="uploadDarkLogo()"
                                                                    accept=".png, .jpg, .jpeg, .gif" />
                                                                {{ 'Change' | localize }}
                                                            </span>
                                                        </button>
                                                        <button
                                                            class="btn btn-secondary"
                                                            type="reset"
                                                            (click)="clearDarkLogo()">
                                                            {{ 'Reset' | localize }}
                                                        </button>
                                                    </div>
                                                </div>
                                            </form>
                                            <h6 class="mt-5">{{ 'ApplicationDarkIcon' | localize }}</h6>
                                            <form #logoUploadForm>
                                                <div class="row mx-0">
                                                    <div class="mb-5 brand-dark-logo-preview-area pl-0 col p-2">
                                                        <a [href]="darkSmallLogoUrl" target="_blank">
                                                            <img height="38" [src]="darkSmallLogoUrl" />
                                                        </a>
                                                    </div>
                                                    <div class="col text-end">
                                                        <button
                                                            type="submit"
                                                            class="btn btn-primary p-0"
                                                            tooltip="{{ 'UploadLogoIcon_Info' | localize }}">
                                                            <span class="fileinput-button p-3">
                                                                <input
                                                                    type="file"
                                                                    #darkLogoMinimalUploaderFileInput
                                                                    ng2FileSelect
                                                                    [uploader]="darkLogoMinimalUploader"
                                                                    (change)="uploadDarkLogoMinimal()"
                                                                    accept=".png, .jpg, .jpeg, .gif" />
                                                                {{ 'Change' | localize }}
                                                            </span>
                                                        </button>
                                                        <button
                                                            class="btn btn-secondary"
                                                            (click)="clearDarkLogoMinimal()">
                                                            {{ 'Reset' | localize }}
                                                        </button>
                                                    </div>
                                                </div>
                                            </form>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="col-md-8 p-3 upload-logo-light border border-3">
                                            <h6 class="mt-5">{{ 'ApplicationLightLogo' | localize }}</h6>
                                            <form #logoUploadForm>
                                                <div class="row mx-0">
                                                    <div class="mb-5 brand-light-logo-preview-area pl-0 col p-2">
                                                        <a [href]="lightLogoUrl" target="_blank">
                                                            <img height="38" [src]="lightLogoUrl" />
                                                        </a>
                                                    </div>
                                                    <div class="col text-end">
                                                        <button
                                                            type="submit"
                                                            class="btn btn-primary p-0"
                                                            tooltip="{{ 'UploadLogo_Info' | localize }}">
                                                            <span class="fileinput-button p-3">
                                                                <input
                                                                    type="file"
                                                                    #lightLogoUploaderFileInput
                                                                    ng2FileSelect
                                                                    [uploader]="lightLogoUploader"
                                                                    (change)="uploadLightLogo()"
                                                                    accept=".png, .jpg, .jpeg, .gif" />
                                                                {{ 'Change' | localize }}
                                                            </span>
                                                        </button>
                                                        <button class="btn btn-secondary" (click)="clearLightLogo()">
                                                            {{ 'Reset' | localize }}
                                                        </button>
                                                    </div>
                                                </div>
                                            </form>
                                            <h6 class="mt-5">{{ 'ApplicationLightIcon' | localize }}</h6>
                                            <form #logoUploadForm>
                                                <div class="row mx-0">
                                                    <div class="mb-5 brand-light-logo-preview-area pl-0 col p-2">
                                                        <a [href]="lightSmallLogoUrl" target="_blank">
                                                            <img height="38" [src]="lightSmallLogoUrl" />
                                                        </a>
                                                    </div>
                                                    <div class="col text-end">
                                                        <button
                                                            type="submit"
                                                            class="btn btn-primary p-0"
                                                            tooltip="{{ 'UploadLogoIcon_Info' | localize }}">
                                                            <span class="fileinput-button p-3">
                                                                <input
                                                                    type="file"
                                                                    #lightLogoMinimalUploaderFileInput
                                                                    ng2FileSelect
                                                                    [uploader]="lightLogoMinimalUploader"
                                                                    (change)="uploadLightLogoMinimal()"
                                                                    accept=".png, .jpg, .jpeg, .gif" />
                                                                {{ 'Change' | localize }}
                                                            </span>
                                                        </button>
                                                        <button
                                                            class="btn btn-secondary"
                                                            (click)="clearLightLogoMinimal()">
                                                            {{ 'Reset' | localize }}
                                                        </button>
                                                    </div>
                                                </div>
                                            </form>
                                        </div>
                                    </div>
                                </div>
                                <div class="row m-form mt-8">
                                    <div class="col-md-6">
                                        <h5 class="mt-5">{{ 'CustomCSS' | localize }}</h5>
                                        @if (appSession.tenant.customCssId) {
                                            <div>
                                                <a
                                                    class="btn btn-primary"
                                                    [href]="
                                                        remoteServiceBaseUrl +
                                                        '/TenantCustomization/GetCustomCss?tenantId=' +
                                                        appSession.tenant.id
                                                    "
                                                    target="_blank">
                                                    {{ 'Download' | localize }}
                                                </a>
                                                <button
                                                    class="btn btn-default"
                                                    type="button"
                                                    (click)="clearCustomCss()">
                                                    {{ 'Clear' | localize }}
                                                </button>
                                            </div>
                                        }
                                        @if (!appSession.tenant.customCssId) {
                                            <div>
                                                <button type="submit" class="btn btn-primary p-0">
                                                    <span class="fileinput-button p-3">
                                                        <input
                                                            type="file"
                                                            tooltip="{{ 'UploadCSS_Info' | localize }}"
                                                            ng2FileSelect
                                                            [uploader]="customCssUploader"
                                                            (change)="uploadCustomCss()"
                                                            accept=".css" />
                                                        {{ 'Upload' | localize }}
                                                    </span>
                                                </button>
                                            </div>
                                        }
                                    </div>
                                </div>
                            </tab>
                        }
                        @if (true) {
                            <tab class="p-5" heading="{{ 'UserManagement' | localize }}">
                                <div class="form">
                                    <h5 class="mt-5">{{ 'FormBasedRegistration' | localize }}</h5>
                                    <div class="mb-5">
                                        <label
                                            for="Setting_AllowSelfRegistration"
                                            class="form-check form-check-custom form-check-solid py-1"
                                            style="margin-bottom: 0">
                                            <input
                                                id="Setting_AllowSelfRegistration"
                                                class="form-check-input"
                                                type="checkbox"
                                                name="AllowSelfRegistration"
                                                [(ngModel)]="settings.userManagement.allowSelfRegistration" />
                                            <span class="form-check-label">
                                                {{ 'AllowUsersToRegisterThemselves' | localize }}
                                            </span>
                                        </label>
                                        <span class="form-text text-muted">
                                            {{ 'AllowUsersToRegisterThemselves_Hint' | localize }}
                                        </span>
                                    </div>
                                    <div class="mb-5" [hidden]="!settings.userManagement.allowSelfRegistration">
                                        <label
                                            for="Setting_IsNewRegisteredUserActiveByDefault"
                                            class="form-check form-check-custom form-check-solid py-1"
                                            style="margin-bottom: 0">
                                            <input
                                                id="Setting_IsNewRegisteredUserActiveByDefault"
                                                type="checkbox"
                                                name="IsNewRegisteredUserActiveByDefault"
                                                [(ngModel)]="settings.userManagement.isNewRegisteredUserActiveByDefault"
                                                class="form-check-input" />
                                            <span class="form-check-label">
                                                {{ 'NewRegisteredUsersIsActiveByDefault' | localize }}
                                            </span>
                                        </label>
                                        <span class="form-text text-muted">
                                            {{ 'NewRegisteredUsersIsActiveByDefault_Hint' | localize }}
                                        </span>
                                    </div>
                                    <h6 class="mt-5">{{ 'SecurityImage' | localize }}</h6>
                                    <div class="mb-5" [hidden]="!settings.userManagement.allowSelfRegistration">
                                        <label
                                            for="Setting_UseCaptchaOnRegistration"
                                            class="form-check form-check-custom form-check-solid py-1">
                                            <input
                                                id="Setting_UseCaptchaOnRegistration"
                                                type="checkbox"
                                                name="UseCaptchaOnRegistration"
                                                [(ngModel)]="
                                                    settings.userManagement.captchaSettings.useCaptchaOnRegistration
                                                "
                                                class="form-check-input" />
                                            <span class="form-check-label">
                                                {{ 'UseCaptchaOnRegistration' | localize }}
                                            </span>
                                        </label>
                                        <label
                                            for="Setting_UseCaptchaOnResetPassword"
                                            class="form-check form-check-custom form-check-solid py-1">
                                            <input
                                                id="Setting_UseCaptchaOnResetPassword"
                                                type="checkbox"
                                                name="UseCaptchaOnResetPassword"
                                                [(ngModel)]="
                                                    settings.userManagement.captchaSettings.useCaptchaOnResetPassword
                                                "
                                                class="form-check-input" />
                                            <span class="form-check-label">
                                                {{ 'UseCaptchaOnResetPassword' | localize }}
                                            </span>
                                        </label>
                                        <label
                                            for="Setting_UseCaptchaOnEmailActivation"
                                            class="form-check form-check-custom form-check-solid py-1">
                                            <input
                                                id="Setting_UseCaptchaOnEmailActivation"
                                                type="checkbox"
                                                name="UseCaptchaOnEmailActivation"
                                                [(ngModel)]="
                                                    settings.userManagement.captchaSettings.useCaptchaOnEmailActivation
                                                "
                                                class="form-check-input" />
                                            <span class="form-check-label">
                                                {{ 'UseCaptchaOnEmailActivation' | localize }}
                                            </span>
                                        </label>
                                        <label
                                            for="Setting_UseCaptchaOnLogin"
                                            class="form-check form-check-custom form-check-solid py-1">
                                            <input
                                                id="Setting_UseCaptchaOnLogin"
                                                type="checkbox"
                                                name="UseCaptchaOnLogin"
                                                [(ngModel)]="settings.userManagement.captchaSettings.useCaptchaOnLogin"
                                                class="form-check-input" />
                                            <span class="form-check-label">
                                                {{ 'UseCaptchaOnLogin' | localize }}
                                            </span>
                                        </label>
                                    </div>
                                    @if (
                                        !isMultiTenancyEnabled ||
                                        settings.userManagement.isRestrictedEmailDomainEnabledForApplication
                                    ) {
                                        <div class="mb-5">
                                            <div class="mb-5">
                                                <label
                                                    for="Setting_IsRestrictedEmailDomainEnabled"
                                                    class="form-check form-check-custom form-check-solid py-1">
                                                    <input
                                                        id="Setting_IsRestrictedEmailDomainEnabled"
                                                        type="checkbox"
                                                        name="RestrictedEmailDomainEnabled"
                                                        [(ngModel)]="
                                                            settings.userManagement.isRestrictedEmailDomainEnabled
                                                        "
                                                        class="form-check-input" />
                                                    <span class="form-check-label">
                                                        {{ 'IsRestrictedEmailDomainEnabled' | localize }}
                                                    </span>
                                                </label>
                                                <span class="form-text text-muted">
                                                    {{ 'RestrictedEmailDomainEnabled_Hint' | localize }}
                                                </span>
                                            </div>
                                            @if (settings.userManagement.isRestrictedEmailDomainEnabled) {
                                                <label class="form-label" for="Setting_RestrictedEmailDomain">
                                                    <span class="form-text text-muted">
                                                        {{ 'RestrictedEmailDomainInfo' | localize }}
                                                    </span>
                                                    <input
                                                        id="Setting_RestrictedEmailDomain"
                                                        type="text"
                                                        name="RestrictedEmailDomain"
                                                        #restrictedEmailDomain="ngModel"
                                                        class="form-control"
                                                        [(ngModel)]="settings.userManagement.restrictedEmailDomain"
                                                        [required]="
                                                            settings.userManagement
                                                                .isRestrictedEmailDomainEnabledForApplication
                                                        "
                                                        [pattern]="emailDomainPattern"
                                                        placeholder="{{
                                                            'RestrictedEmailDomainPlaceholder' | localize
                                                        }}"
                                                        [ngClass]="{
                                                            'is-invalid':
                                                                restrictedEmailDomain.invalid &&
                                                                (restrictedEmailDomain.dirty ||
                                                                    restrictedEmailDomain.touched),
                                                        }" />
                                                    <validation-messages
                                                        [formCtrl]="restrictedEmailDomain"></validation-messages>
                                                </label>
                                            }
                                        </div>
                                    }
                                    @if (
                                        !isMultiTenancyEnabled ||
                                        settings.userManagement.passwordlessLogin.isEnabledForApplication
                                    ) {
                                        <div>
                                            <h5 class="mt-5">{{ 'PasswordlessLogin' | localize }}</h5>
                                            @if (
                                                !isMultiTenancyEnabled ||
                                                settings.userManagement.passwordlessLogin
                                                    .isEmailProviderEnabledForApplication
                                            ) {
                                                <label class="form-check form-check-custom form-check-solid py-1">
                                                    <input
                                                        id="Setting_IsEmailPasswordlessLoginEnabled"
                                                        type="checkbox"
                                                        name="IsEmailPasswordlessLoginEnabled"
                                                        [(ngModel)]="
                                                            settings.userManagement.passwordlessLogin
                                                                .isEmailProviderEnabled
                                                        "
                                                        class="form-check-input" />
                                                    <span class="form-check-label">
                                                        {{ 'IsEmailPasswordlessLoginEnabled' | localize }}
                                                    </span>
                                                </label>
                                            }
                                            @if (
                                                !isMultiTenancyEnabled ||
                                                settings.userManagement.passwordlessLogin
                                                    .isSmsProviderEnabledForApplication
                                            ) {
                                                <label class="form-check form-check-custom form-check-solid py-1">
                                                    <input
                                                        id="Setting_IsSmsPasswordlessLoginEnabled"
                                                        type="checkbox"
                                                        name="IsSmsPasswordlessLoginEnabled"
                                                        [(ngModel)]="
                                                            settings.userManagement.passwordlessLogin
                                                                .isSmsProviderEnabled
                                                        "
                                                        class="form-check-input" />
                                                    <span class="form-check-label">
                                                        {{ 'IsSmsPasswordlessLoginEnabled' | localize }}
                                                    </span>
                                                </label>
                                            }
                                        </div>
                                    }
                                    <h5 class="mt-5">{{ 'CookieConsent' | localize }}</h5>
                                    <label
                                        for="Settings_IsCookieConsentEnabled"
                                        class="form-check form-check-custom form-check-solid py-1">
                                        <input
                                            id="Settings_IsCookieConsentEnabled"
                                            class="form-check-input"
                                            type="checkbox"
                                            name="IsCookieConsentEnabled"
                                            [(ngModel)]="settings.userManagement.isCookieConsentEnabled" />
                                        <span class="form-check-label">
                                            {{ 'IsCookieConsentEnabled' | localize }}
                                        </span>
                                    </label>
                                    <h5 class="mt-5">{{ 'SessionTimeOut' | localize }}</h5>
                                    <label
                                        for="Setting_IsSessionTimeOutEnabled"
                                        class="form-check form-check-custom form-check-solid py-1">
                                        <input
                                            id="Setting_IsSessionTimeOutEnabled"
                                            class="form-check-input"
                                            type="checkbox"
                                            name="IsEnabled"
                                            [(ngModel)]="settings.userManagement.sessionTimeOutSettings.isEnabled" />
                                        <span class="form-check-label">
                                            {{ 'IsSessionTimeOutEnabled' | localize }}
                                        </span>
                                    </label>
                                    @if (settings.userManagement.sessionTimeOutSettings.isEnabled) {
                                        <label
                                            for="Setting_ShowLockScreenWhenTimedOut"
                                            class="form-check form-check-custom form-check-solid py-1">
                                            <input
                                                id="Setting_ShowLockScreenWhenTimedOut"
                                                class="form-check-input"
                                                type="checkbox"
                                                name="IsEnabled"
                                                [(ngModel)]="
                                                    settings.userManagement.sessionTimeOutSettings
                                                        .showLockScreenWhenTimedOut
                                                " />
                                            <span class="form-check-label">
                                                {{ 'ShowLockScreenWhenTimedOut' | localize }}
                                            </span>
                                        </label>
                                    }
                                    @if (settings.userManagement.sessionTimeOutSettings.isEnabled) {
                                        <div class="mb-5 pt-1">
                                            <label class="form-label" for="Setting_SessionTimeOutSecond">
                                                {{ 'SessionTimeOutSecond' | localize }}
                                            </label>
                                            <input
                                                id="Setting_SessionTimeOutSecond"
                                                type="number"
                                                name="TimeOutSecond"
                                                class="form-control"
                                                min="1"
                                                [ngClass]="{
                                                    edited: settings.userManagement.sessionTimeOutSettings
                                                        .timeOutSecond,
                                                }"
                                                [(ngModel)]="
                                                    settings.userManagement.sessionTimeOutSettings.timeOutSecond
                                                " />
                                        </div>
                                    }
                                    @if (settings.userManagement.sessionTimeOutSettings.isEnabled) {
                                        <div class="mb-5">
                                            <label class="form-label" for="Setting_ShowTimeOutNotificationSecond">
                                                {{ 'ShowTimeOutNotificationSecond' | localize }}
                                            </label>
                                            <input
                                                id="Setting_ShowTimeOutNotificationSecond"
                                                type="number"
                                                name="ShowTimeOutNotificationSecond"
                                                class="form-control"
                                                min="1"
                                                [ngClass]="{
                                                    edited: settings.userManagement.sessionTimeOutSettings
                                                        .showTimeOutNotificationSecond,
                                                }"
                                                [(ngModel)]="
                                                    settings.userManagement.sessionTimeOutSettings
                                                        .showTimeOutNotificationSecond
                                                " />
                                        </div>
                                    }
                                </div>
                                @if (settings.ldap.isModuleEnabled) {
                                    <div>
                                        <h5 class="mt-4">{{ 'LdapSettings' | localize }}</h5>
                                        <label
                                            for="Setting_LdapIsEnabled"
                                            class="form-check form-check-custom form-check-solid py-1">
                                            <input
                                                id="Setting_LdapIsEnabled"
                                                type="checkbox"
                                                name="LdapIsEnabled"
                                                [(ngModel)]="settings.ldap.isEnabled"
                                                class="form-check-input" />
                                            <span class="form-check-label">
                                                {{ 'EnableLdapAuthentication' | localize }}
                                            </span>
                                        </label>
                                        <div class="mt-5 mb-5" [hidden]="!settings.ldap.isEnabled">
                                            <label
                                                for="Setting_LdapUseSsl"
                                                class="form-check form-check-custom form-check-solid py-1">
                                                <input
                                                    id="Setting_LdapUseSsl"
                                                    type="checkbox"
                                                    name="UseSsl"
                                                    [(ngModel)]="settings.ldap.useSsl"
                                                    class="form-check-input" />
                                                <span class="form-check-label">
                                                    {{ 'UseSsl' | localize }}
                                                </span>
                                            </label>
                                        </div>
                                        <div class="mb-5" [hidden]="!settings.ldap.isEnabled">
                                            <label class="form-label" for="LdapDomainName">
                                                {{ 'DomainName' | localize }}
                                            </label>
                                            <input
                                                id="LdapDomainName"
                                                type="text"
                                                name="LdapDomainName"
                                                class="form-control"
                                                [(ngModel)]="settings.ldap.domain"
                                                maxlength="128" />
                                        </div>
                                        <div class="mb-5" [hidden]="!settings.ldap.isEnabled">
                                            <label class="form-label" for="LdapUserName">
                                                {{ 'UserName' | localize }}
                                            </label>
                                            <input
                                                id="LdapUserName"
                                                type="text"
                                                name="LdapUserName"
                                                class="form-control"
                                                [(ngModel)]="settings.ldap.userName"
                                                maxlength="128" />
                                        </div>
                                        <div class="mb-5" [hidden]="!settings.ldap.isEnabled">
                                            <label class="form-label" for="LdapPassword">
                                                {{ 'Password' | localize }}
                                            </label>
                                            <input
                                                id="LdapPassword"
                                                type="password"
                                                name="LdapPassword"
                                                class="form-control"
                                                [(ngModel)]="settings.ldap.password"
                                                maxlength="128" />
                                        </div>
                                    </div>
                                }
                                <div>
                                    <h5 class="mt-4">{{ 'OtherSettings' | localize }}</h5>
                                    <label
                                        for="Setting_IsEmailConfirmationRequiredForLogin"
                                        class="form-check form-check-custom form-check-solid py-1">
                                        <input
                                            id="Setting_IsEmailConfirmationRequiredForLogin"
                                            type="checkbox"
                                            name="IsEmailConfirmationRequiredForLogin"
                                            [(ngModel)]="settings.userManagement.isEmailConfirmationRequiredForLogin"
                                            class="form-check-input" />
                                        <span class="form-check-label">
                                            {{ 'EmailConfirmationRequiredForLogin' | localize }}
                                        </span>
                                    </label>
                                    @if (settings.userManagement.isQrLoginEnabledForApplication) {
                                        <div>
                                            <h5 class="mt-5">{{ 'QrLogin' | localize }}</h5>
                                            <label class="form-check form-check-custom form-check-solid py-1">
                                                <input
                                                    id="Setting_IsQrLoginEnabled"
                                                    type="checkbox"
                                                    name="IsQrLoginEnabled"
                                                    [(ngModel)]="settings.userManagement.isQrLoginEnabled"
                                                    class="form-check-input" />
                                                <span class="form-check-label">
                                                    {{ 'IsQrLoginEnabled' | localize }}
                                                </span>
                                            </label>
                                        </div>
                                    }
                                    <h5 class="mt-5">{{ 'Profile' | localize }}</h5>
                                    <label
                                        for="Setting_AllowUsingGravatarProfilePicture"
                                        class="form-check form-check-custom form-check-solid py-1">
                                        <input
                                            id="Setting_AllowUsingGravatarProfilePicture"
                                            class="form-check-input"
                                            type="checkbox"
                                            name="AllowUsingGravatarProfilePicture"
                                            [(ngModel)]="settings.userManagement.allowUsingGravatarProfilePicture" />
                                        <span class="form-check-label">
                                            {{ 'AllowUsingGravatarProfilePicture' | localize }}
                                        </span>
                                    </label>
                                </div>
                            </tab>
                        }
                        @if (true) {
                            <tab class="p-5" heading="{{ 'Security' | localize }}">
                                <!-- *ngIf="true" is a workaround for https://github.com/valor-software/ng2-bootstrap/issues/823 -->
                                <form class="form" #securitySettingsForm="ngForm" method="post">
                                    <div>
                                        <h5 class="mt-5">{{ 'PasswordComplexity' | localize }}</h5>
                                        <label
                                            for="Setting_PasswordComplexity_UseDefaultSettings"
                                            class="form-check form-check-custom form-check-solid py-1">
                                            <input
                                                id="Setting_PasswordComplexity_UseDefaultSettings"
                                                type="checkbox"
                                                name="Setting_PasswordComplexity_UseDefaultSettings"
                                                [(ngModel)]="settings.security.useDefaultPasswordComplexitySettings"
                                                class="form-check-input" />
                                            <span class="form-check-label">
                                                {{ 'UseDefaultSettings' | localize }}
                                            </span>
                                        </label>
                                        <div class="px-5">
                                            <label
                                                for="Setting_PasswordComplexity_RequireDigit"
                                                class="form-check form-check-custom form-check-solid py-1">
                                                @if (!settings.security.useDefaultPasswordComplexitySettings) {
                                                    <input
                                                        id="Setting_PasswordComplexity_RequireDigit"
                                                        type="checkbox"
                                                        name="Setting_PasswordComplexity_RequireDigit"
                                                        [(ngModel)]="settings.security.passwordComplexity.requireDigit"
                                                        class="form-check-input" />
                                                }
                                                @if (settings.security.useDefaultPasswordComplexitySettings) {
                                                    <input
                                                        id="Setting_PasswordComplexity_RequireDigit"
                                                        type="checkbox"
                                                        name="Setting_PasswordComplexity_RequireDigit"
                                                        [(ngModel)]="
                                                            settings.security.defaultPasswordComplexity.requireDigit
                                                        "
                                                        disabled
                                                        class="form-check-input" />
                                                }
                                                <span class="form-check-label">
                                                    {{ 'PasswordComplexity_RequireDigit' | localize }}
                                                </span>
                                            </label>
                                            <label
                                                for="Setting_PasswordComplexity_RequireLowercase"
                                                class="form-check form-check-custom form-check-solid py-1">
                                                @if (!settings.security.useDefaultPasswordComplexitySettings) {
                                                    <input
                                                        id="Setting_PasswordComplexity_RequireLowercase"
                                                        type="checkbox"
                                                        name="Setting_PasswordComplexity_RequireLowercase"
                                                        [(ngModel)]="
                                                            settings.security.passwordComplexity.requireLowercase
                                                        "
                                                        class="form-check-input" />
                                                }
                                                @if (settings.security.useDefaultPasswordComplexitySettings) {
                                                    <input
                                                        id="Setting_PasswordComplexity_RequireLowercase"
                                                        type="checkbox"
                                                        name="Setting_PasswordComplexity_RequireLowercase"
                                                        [(ngModel)]="
                                                            settings.security.defaultPasswordComplexity.requireLowercase
                                                        "
                                                        disabled
                                                        class="form-check-input" />
                                                }
                                                <span class="form-check-label">
                                                    {{ 'PasswordComplexity_RequireLowercase' | localize }}
                                                </span>
                                            </label>
                                            <label
                                                for="Setting_PasswordComplexity_RequireNonAlphanumeric"
                                                class="form-check form-check-custom form-check-solid py-1">
                                                @if (!settings.security.useDefaultPasswordComplexitySettings) {
                                                    <input
                                                        id="Setting_PasswordComplexity_RequireNonAlphanumeric"
                                                        type="checkbox"
                                                        name="Setting_PasswordComplexity_RequireNonAlphanumeric"
                                                        [(ngModel)]="
                                                            settings.security.passwordComplexity.requireNonAlphanumeric
                                                        "
                                                        class="form-check-input" />
                                                }
                                                @if (settings.security.useDefaultPasswordComplexitySettings) {
                                                    <input
                                                        id="Setting_PasswordComplexity_RequireNonAlphanumeric"
                                                        type="checkbox"
                                                        name="Setting_PasswordComplexity_RequireNonAlphanumeric"
                                                        [(ngModel)]="
                                                            settings.security.defaultPasswordComplexity
                                                                .requireNonAlphanumeric
                                                        "
                                                        disabled
                                                        class="form-check-input" />
                                                }
                                                <span class="form-check-label">
                                                    {{ 'PasswordComplexity_RequireNonAlphanumeric' | localize }}
                                                </span>
                                            </label>
                                            <label
                                                for="Setting_PasswordComplexity_RequireUppercase"
                                                class="form-check form-check-custom form-check-solid py-1">
                                                @if (!settings.security.useDefaultPasswordComplexitySettings) {
                                                    <input
                                                        id="Setting_PasswordComplexity_RequireUppercase"
                                                        type="checkbox"
                                                        name="Setting_PasswordComplexity_RequireUppercase"
                                                        [(ngModel)]="
                                                            settings.security.passwordComplexity.requireUppercase
                                                        "
                                                        class="form-check-input" />
                                                }
                                                @if (settings.security.useDefaultPasswordComplexitySettings) {
                                                    <input
                                                        id="Setting_PasswordComplexity_RequireUppercase"
                                                        type="checkbox"
                                                        name="Setting_PasswordComplexity_RequireUppercase"
                                                        [(ngModel)]="
                                                            settings.security.defaultPasswordComplexity.requireUppercase
                                                        "
                                                        disabled
                                                        class="form-check-input" />
                                                }
                                                <span class="form-check-label">
                                                    {{ 'PasswordComplexity_RequireUppercase' | localize }}
                                                </span>
                                            </label>
                                            <div class="mb-5">
                                                <label class="form-label">
                                                    {{ 'PasswordComplexity_RequiredLength' | localize }}
                                                </label>
                                                @if (!settings.security.useDefaultPasswordComplexitySettings) {
                                                    <input
                                                        type="number"
                                                        name="RequiredLength"
                                                        min="{{
                                                            settings.security.passwordComplexity.allowedMinimumLength
                                                        }}"
                                                        class="form-control"
                                                        [ngClass]="{
                                                            edited: settings.security.passwordComplexity.requiredLength,
                                                        }"
                                                        [(ngModel)]="
                                                            settings.security.passwordComplexity.requiredLength
                                                        " />
                                                }
                                                @if (settings.security.useDefaultPasswordComplexitySettings) {
                                                    <input
                                                        type="number"
                                                        name="RequiredLength"
                                                        class="form-control"
                                                        [ngClass]="{
                                                            edited: settings.security.defaultPasswordComplexity
                                                                .requiredLength,
                                                        }"
                                                        [(ngModel)]="
                                                            settings.security.defaultPasswordComplexity.requiredLength
                                                        "
                                                        disabled />
                                                }
                                            </div>
                                        </div>
                                    </div>
                                    @if (!isMultiTenancyEnabled) {
                                        <div>
                                            <h5 class="mt-5">{{ 'Password' | localize }}</h5>
                                            <label class="form-check form-check-custom form-check-solid py-1">
                                                <input
                                                    id="Setting_EnableCheckingLastXPasswordWhenPasswordChange"
                                                    type="checkbox"
                                                    name="EnableCheckingLastXPasswordWhenPasswordChange"
                                                    [(ngModel)]="
                                                        settings.security.userPasswordSettings
                                                            .enableCheckingLastXPasswordWhenPasswordChange
                                                    "
                                                    class="form-check-input" />
                                                <span class="form-check-label">
                                                    {{
                                                        'EnableCheckingLastXPasswordWhenPasswordChangeSettingLabel'
                                                            | localize
                                                    }}
                                                </span>
                                            </label>
                                            @if (
                                                settings.security.userPasswordSettings
                                                    .enableCheckingLastXPasswordWhenPasswordChange
                                            ) {
                                                <div class="mb-5 pt-1">
                                                    <label class="form-label" for="Setting_CheckingLastXPasswordCount">
                                                        {{ 'CheckingLastXPasswordCountSettingLabel' | localize }}
                                                    </label>
                                                    <input
                                                        id="Setting_CheckingLastXPasswordCount"
                                                        type="number"
                                                        name="CheckingLastXPasswordCount"
                                                        class="form-control"
                                                        min="1"
                                                        [ngClass]="{
                                                            edited: settings.security.userPasswordSettings
                                                                .checkingLastXPasswordCount,
                                                        }"
                                                        [(ngModel)]="
                                                            settings.security.userPasswordSettings
                                                                .checkingLastXPasswordCount
                                                        " />
                                                </div>
                                            }
                                            <label class="form-check form-check-custom form-check-solid py-1">
                                                <input
                                                    id="Setting_EnablePasswordExpiration"
                                                    type="checkbox"
                                                    name="EnablePasswordExpiration"
                                                    [(ngModel)]="
                                                        settings.security.userPasswordSettings.enablePasswordExpiration
                                                    "
                                                    class="form-check-input" />
                                                <span class="form-check-label">
                                                    {{ 'EnablePasswordExpirationSettingLabel' | localize }}
                                                </span>
                                            </label>
                                            @if (settings.security.userPasswordSettings.enablePasswordExpiration) {
                                                <div class="mb-5 pt-1">
                                                    <label class="form-label" for="Setting_PasswordExpirationDayCount">
                                                        {{ 'PasswordExpirationDayCountSettingLabel' | localize }}
                                                    </label>
                                                    <input
                                                        id="Setting_PasswordExpirationDayCount"
                                                        type="number"
                                                        name="PasswordExpirationDayCount"
                                                        class="form-control"
                                                        min="1"
                                                        [ngClass]="{
                                                            edited: settings.security.userPasswordSettings
                                                                .passwordExpirationDayCount,
                                                        }"
                                                        [(ngModel)]="
                                                            settings.security.userPasswordSettings
                                                                .passwordExpirationDayCount
                                                        " />
                                                </div>
                                            }
                                            @if (settings.security.userPasswordSettings.enablePasswordExpiration) {
                                                <div class="mb-5 pt-1">
                                                    <label
                                                        class="form-label"
                                                        for="Setting_PasswordResetCodeExpirationHours">
                                                        {{ 'PasswordResetCodeExpirationHoursSettingLabel' | localize }}
                                                    </label>
                                                    <input
                                                        id="Setting_PasswordResetCodeExpirationHours"
                                                        #passwordResetCodeExpirationHoursInput="ngModel"
                                                        type="number"
                                                        name="PasswordResetCodeExpirationHours"
                                                        class="form-control"
                                                        min="1"
                                                        required
                                                        [(ngModel)]="
                                                            settings.security.userPasswordSettings
                                                                .passwordResetCodeExpirationHours
                                                        " />
                                                    <validation-messages
                                                        [formCtrl]="
                                                            passwordResetCodeExpirationHoursInput
                                                        "></validation-messages>
                                                </div>
                                            }
                                        </div>
                                    }
                                    <div>
                                        <h5 class="mt-5">{{ 'UserLockOut' | localize }}</h5>
                                        <label
                                            for="Setting_UserLockOut_IsEnabled"
                                            class="form-check form-check-custom form-check-solid py-1 mb-5">
                                            <input
                                                id="Setting_UserLockOut_IsEnabled"
                                                type="checkbox"
                                                name="Setting_UserLockOut_IsEnabled"
                                                [(ngModel)]="settings.security.userLockOut.isEnabled"
                                                class="form-check-input" />
                                            <span class="form-check-label">
                                                {{ 'EnableUserAccountLockingOnFailedLoginAttempts' | localize }}
                                            </span>
                                        </label>
                                        @if (settings.security.userLockOut.isEnabled) {
                                            <div class="mb-5">
                                                <label class="form-label" for="MaxFailedAccessAttemptsBeforeLockout">
                                                    {{ 'MaxFailedAccessAttemptsBeforeLockout' | localize }}
                                                </label>
                                                <input
                                                    id="MaxFailedAccessAttemptsBeforeLockout"
                                                    type="number"
                                                    name="MaxFailedAccessAttemptsBeforeLockout"
                                                    #maxFailedAccessAttemptsBeforeLockoutInput="ngModel"
                                                    class="form-control"
                                                    [ngClass]="{
                                                        edited: settings.security.userLockOut
                                                            .maxFailedAccessAttemptsBeforeLockout,
                                                    }"
                                                    [(ngModel)]="
                                                        settings.security.userLockOut
                                                            .maxFailedAccessAttemptsBeforeLockout
                                                    "
                                                    [required]="settings.security.userLockOut.isEnabled" />
                                                <validation-messages
                                                    [formCtrl]="
                                                        maxFailedAccessAttemptsBeforeLockoutInput
                                                    "></validation-messages>
                                            </div>
                                        }
                                        @if (settings.security.userLockOut.isEnabled) {
                                            <div class="mb-5">
                                                <label class="form-label" for="DefaultAccountLockoutSeconds">
                                                    {{ 'DefaultAccountLockoutDurationAsSeconds' | localize }}
                                                </label>
                                                <input
                                                    id="DefaultAccountLockoutSeconds"
                                                    type="number"
                                                    name="DefaultAccountLockoutSeconds"
                                                    #defaultAccountLockoutSecondsInput="ngModel"
                                                    class="form-control"
                                                    [ngClass]="{
                                                        edited: settings.security.userLockOut
                                                            .defaultAccountLockoutSeconds,
                                                    }"
                                                    [(ngModel)]="
                                                        settings.security.userLockOut.defaultAccountLockoutSeconds
                                                    "
                                                    [required]="settings.security.userLockOut.isEnabled" />
                                                <validation-messages
                                                    [formCtrl]="
                                                        defaultAccountLockoutSecondsInput
                                                    "></validation-messages>
                                            </div>
                                        }
                                    </div>
                                    @if (
                                        !isMultiTenancyEnabled ||
                                        settings.security.twoFactorLogin.isEnabledForApplication
                                    ) {
                                        <div>
                                            <h5 class="mt-5">{{ 'TwoFactorLogin' | localize }}</h5>
                                            <label
                                                for="Setting_TwoFactorLogin_IsEnabled"
                                                class="form-check form-check-custom form-check-solid py-1">
                                                <input
                                                    id="Setting_TwoFactorLogin_IsEnabled"
                                                    type="checkbox"
                                                    name="Setting_TwoFactorLogin_IsEnabled"
                                                    [(ngModel)]="settings.security.twoFactorLogin.isEnabled"
                                                    class="form-check-input" />
                                                <span class="form-check-label">
                                                    {{ 'EnableTwoFactorLogin' | localize }}
                                                </span>
                                            </label>
                                            @if (
                                                settings.security.twoFactorLogin.isEnabled &&
                                                (!isMultiTenancyEnabled ||
                                                    settings.security.twoFactorLogin.isEnabledForApplication)
                                            ) {
                                                <label
                                                    for="Setting_TwoFactorLogin_IsEmailProviderEnabled"
                                                    class="form-check form-check-custom form-check-solid py-1">
                                                    <input
                                                        id="Setting_TwoFactorLogin_IsEmailProviderEnabled"
                                                        type="checkbox"
                                                        name="Setting_TwoFactorLogin_IsEmailProviderEnabled"
                                                        [(ngModel)]="
                                                            settings.security.twoFactorLogin.isEmailProviderEnabled
                                                        "
                                                        class="form-check-input" />
                                                    <span class="form-check-label">
                                                        {{ 'IsEmailVerificationEnabled' | localize }}
                                                    </span>
                                                </label>
                                            }
                                            @if (
                                                settings.security.twoFactorLogin.isEnabled &&
                                                (!isMultiTenancyEnabled ||
                                                    settings.security.twoFactorLogin.isEnabledForApplication)
                                            ) {
                                                <label
                                                    for="Setting_TwoFactorLogin_IsSmsProviderEnabled"
                                                    class="form-check form-check-custom form-check-solid py-1">
                                                    <input
                                                        id="Setting_TwoFactorLogin_IsSmsProviderEnabled"
                                                        type="checkbox"
                                                        name="Setting_TwoFactorLogin_IsSmsProviderEnabled"
                                                        [(ngModel)]="
                                                            settings.security.twoFactorLogin.isSmsProviderEnabled
                                                        "
                                                        class="form-check-input" />
                                                    <span class="form-check-label">
                                                        {{ 'IsSmsVerificationEnabled' | localize }}
                                                    </span>
                                                </label>
                                            }
                                            @if (
                                                settings.security.twoFactorLogin.isEnabled &&
                                                (!isMultiTenancyEnabled ||
                                                    settings.security.twoFactorLogin.isEnabledForApplication)
                                            ) {
                                                <label
                                                    for="Setting_TwoFactorLogin_IsGoogleAuthenticatorEnabled"
                                                    class="form-check form-check-custom form-check-solid py-1">
                                                    <input
                                                        id="Setting_TwoFactorLogin_IsGoogleAuthenticatorEnabled"
                                                        type="checkbox"
                                                        name="Setting_TwoFactorLogin_IsGoogleAuthenticatorEnabled"
                                                        [(ngModel)]="
                                                            settings.security.twoFactorLogin
                                                                .isGoogleAuthenticatorEnabled
                                                        "
                                                        class="form-check-input" />
                                                    <span class="form-check-label">
                                                        {{ 'IsGoogleAuthenticatorEnabled' | localize }}
                                                    </span>
                                                </label>
                                            }
                                            @if (settings.security.twoFactorLogin.isEnabled) {
                                                <label
                                                    for="Setting_TwoFactorLogin_IsRememberBrowserEnabled"
                                                    class="form-check form-check-custom form-check-solid py-1">
                                                    <input
                                                        id="Setting_TwoFactorLogin_IsRememberBrowserEnabled"
                                                        type="checkbox"
                                                        name="Setting_TwoFactorLogin_IsRememberBrowserEnabled"
                                                        [(ngModel)]="
                                                            settings.security.twoFactorLogin.isRememberBrowserEnabled
                                                        "
                                                        class="form-check-input" />
                                                    <span class="form-check-label">
                                                        {{ 'AllowToRememberBrowserForTwoFactorLogin' | localize }}
                                                    </span>
                                                </label>
                                            }
                                        </div>
                                    }
                                    @if (!isMultiTenancyEnabled) {
                                        <div>
                                            <h5 class="mt-5">{{ 'OneConcurrentLoginPerUser' | localize }}</h5>
                                            <label
                                                for="Setting_IsOneConcurrentLoginPerUserActive"
                                                class="form-check form-check-custom form-check-solid py-1">
                                                <input
                                                    id="Setting_IsOneConcurrentLoginPerUserActive"
                                                    type="checkbox"
                                                    name="Setting_IsOneConcurrentLoginPerUserActive"
                                                    [(ngModel)]="settings.security.allowOneConcurrentLoginPerUser"
                                                    class="form-check-input" />
                                                <span class="form-check-label">
                                                    {{ 'OneConcurrentLoginPerUserActive' | localize }}
                                                </span>
                                            </label>
                                        </div>
                                    }
                                </form>
                            </tab>
                        }
                        @if (!isMultiTenancyEnabled || appSession.application.allowTenantsToChangeEmailSettings) {
                            <tab class="p-5" heading="{{ 'EmailSmtp' | localize }}">
                                @if (isMultiTenancyEnabled) {
                                    <div class="mb-5 m-form__group">
                                        <label
                                            for="Settings_UseHostDefaultEmailSettings"
                                            class="form-check form-check-custom form-check-solid py-1">
                                            <input
                                                id="Settings_UseHostDefaultEmailSettings"
                                                type="checkbox"
                                                name="UseHostDefaultEmailSettings"
                                                [(ngModel)]="settings.email.useHostDefaultEmailSettings"
                                                class="form-check-input" />
                                            <span class="form-check-label">
                                                {{ 'UseHostDefaultEmailSettings' | localize }}
                                            </span>
                                        </label>
                                    </div>
                                }
                                <div [hidden]="settings.email.useHostDefaultEmailSettings">
                                    <form class="form" #emailSmtpSettingsForm="ngForm" method="post">
                                        <div class="mb-5">
                                            <label class="form-label" for="DefaultFromAddress">
                                                {{ 'DefaultFromAddress' | localize }}
                                            </label>
                                            <input
                                                id="DefaultFromAddress"
                                                type="email"
                                                name="DefaultFromAddress"
                                                #defaultFromAddressInput="ngModel"
                                                class="form-control"
                                                [ngClass]="{ edited: settings.email.defaultFromAddress }"
                                                [(ngModel)]="settings.email.defaultFromAddress"
                                                maxlength="128"
                                                email />
                                            <validation-messages
                                                [formCtrl]="defaultFromAddressInput"></validation-messages>
                                        </div>
                                        <div class="mb-5">
                                            <label for="DefaultFromDisplayName">
                                                {{ 'DefaultFromDisplayName' | localize }}
                                            </label>
                                            <input
                                                id="DefaultFromDisplayName"
                                                type="text"
                                                name="DefaultFromDisplayName"
                                                class="form-control"
                                                [ngClass]="{ edited: settings.email.defaultFromDisplayName }"
                                                [(ngModel)]="settings.email.defaultFromDisplayName"
                                                maxlength="128" />
                                        </div>
                                        <div class="mb-5">
                                            <label class="form-label" for="SmtpHost">{{ 'SmtpHost' | localize }}</label>
                                            <input
                                                id="SmtpHost"
                                                type="text"
                                                name="SmtpHost"
                                                class="form-control"
                                                [ngClass]="{ edited: settings.email.smtpHost }"
                                                [(ngModel)]="settings.email.smtpHost"
                                                maxlength="64" />
                                        </div>
                                        <div class="mb-5">
                                            <label class="form-label" for="SmtpPort">{{ 'SmtpPort' | localize }}</label>
                                            <input
                                                id="SmtpPort"
                                                type="number"
                                                name="SmtpPort"
                                                class="form-control"
                                                [ngClass]="{ edited: settings.email.smtpPort }"
                                                [(ngModel)]="settings.email.smtpPort"
                                                maxlength="5" />
                                        </div>
                                    </form>
                                    <label
                                        for="Settings_SmtpEnableSsl"
                                        class="form-check form-check-custom form-check-solid py-1">
                                        <input
                                            id="Settings_SmtpEnableSsl"
                                            type="checkbox"
                                            name="SmtpEnableSsl"
                                            [(ngModel)]="settings.email.smtpEnableSsl"
                                            class="form-check-input" />
                                        <span class="form-check-label">
                                            {{ 'UseSsl' | localize }}
                                        </span>
                                    </label>
                                    <label
                                        for="Settings_SmtpUseAuthentication"
                                        class="form-check form-check-custom form-check-solid py-1">
                                        <input
                                            id="Settings_SmtpUseAuthentication"
                                            type="checkbox"
                                            name="SmtpUseAuthentication"
                                            [(ngModel)]="settings.email.smtpUseAuthentication"
                                            class="form-check-input" />
                                        <span class="form-check-label">
                                            {{ 'UseAuthentication' | localize }}
                                        </span>
                                    </label>
                                    <div class="mb-5" [hidden]="!settings.email.smtpUseAuthentication">
                                        <label class="form-label" for="SmtpDomainName">
                                            {{ 'DomainName' | localize }}
                                        </label>
                                        <input
                                            id="SmtpDomainName"
                                            type="text"
                                            name="SmtpDomainName"
                                            class="form-control"
                                            [ngClass]="{ edited: settings.email.smtpDomain }"
                                            [(ngModel)]="settings.email.smtpDomain"
                                            maxlength="128" />
                                    </div>
                                    <div class="mb-5" [hidden]="!settings.email.smtpUseAuthentication">
                                        <label class="form-label" for="SmtpUserName">{{ 'UserName' | localize }}</label>
                                        <input
                                            id="SmtpUserName"
                                            type="text"
                                            name="SmtpUserName"
                                            class="form-control"
                                            [ngClass]="{ edited: settings.email.smtpUserName }"
                                            [(ngModel)]="settings.email.smtpUserName"
                                            maxlength="128" />
                                    </div>
                                    @if (!setRandomPassword) {
                                        <div class="mb-5" [hidden]="!settings.email.smtpUseAuthentication">
                                            <label class="form-label" for="SmtpPassword">
                                                {{ 'Password' | localize }}
                                            </label>
                                            <input
                                                id="SmtpPassword"
                                                type="password"
                                                name="SmtpPassword"
                                                class="form-control"
                                                [ngClass]="{ edited: settings.email.smtpPassword }"
                                                [(ngModel)]="settings.email.smtpPassword"
                                                maxlength="128" />
                                        </div>
                                    }
                                </div>
                                <hr />
                                <h5 class="mt-5">{{ 'TestEmailSettingsHeader' | localize }}</h5>
                                <div class="row">
                                    <div class="col-md-4">
                                        <form class="form" #emailSmtpSettingsTestForm="ngForm">
                                            <div class="mb-5">
                                                <input
                                                    type="email"
                                                    name="testEmailAddress"
                                                    #testEmailAddressInput="ngModel"
                                                    class="form-control"
                                                    [ngClass]="{ edited: testEmailAddress }"
                                                    [(ngModel)]="testEmailAddress"
                                                    maxlength="256"
                                                    email />
                                                <validation-messages
                                                    [formCtrl]="testEmailAddressInput"></validation-messages>
                                            </div>
                                        </form>
                                    </div>
                                    <div class="mb-5 col-md-2">
                                        <button
                                            class="btn btn-primary"
                                            type="button"
                                            (click)="sendTestEmail()"
                                            [disabled]="!emailSmtpSettingsTestForm.form.valid">
                                            {{ 'SendTestEmail' | localize }}
                                        </button>
                                    </div>
                                </div>
                            </tab>
                        }
                        @if (true) {
                            <tab class="p-5" heading="{{ 'Invoice' | localize }}">
                                <!-- *ngIf="true" is a workaround for https://github.com/valor-software/ng2-bootstrap/issues/823 -->
                                <h5 class="mt-5 mb-5">{{ 'InvoiceInformation' | localize }}</h5>
                                <div class="mb-5">
                                    <label class="form-label" for="LegalName">{{ 'LegalName' | localize }}</label>
                                    <input
                                        id="LegalName"
                                        type="text"
                                        name="legalName"
                                        class="form-control"
                                        [ngClass]="{ edited: settings.billing.legalName }"
                                        [(ngModel)]="settings.billing.legalName"
                                        maxlength="64" />
                                </div>
                                <div class="mb-5">
                                    <label class="form-label" for="Address">{{ 'Address' | localize }}</label>
                                    <textarea
                                        id="Address"
                                        rows="5"
                                        name="address"
                                        class="form-control"
                                        [ngClass]="{ edited: settings.billing.address }"
                                        [(ngModel)]="settings.billing.address"
                                        maxlength="256"></textarea>
                                </div>
                                <div class="mb-5">
                                    <label class="form-label" for="taxVatNo">{{ 'Tax/VatNo' | localize }}</label>
                                    <input
                                        id="taxVatNo"
                                        type="text"
                                        name="taxVatNo"
                                        class="form-control"
                                        [ngClass]="{ edited: settings.billing.taxVatNo }"
                                        [(ngModel)]="settings.billing.taxVatNo"
                                        maxlength="32" />
                                </div>
                            </tab>
                        }
                        @if (!isMultiTenancyEnabled) {
                            <tab class="p-5" heading="{{ 'OtherSettings' | localize }}">
                                <h5 class="mt-5">{{ 'IsQuickThemeSelectEnabled' | localize }}</h5>
                                <label
                                    for="Settings_IsQuickThemeSelectEnabled"
                                    class="form-check form-check-custom form-check-solid py-1">
                                    <input
                                        id="Settings_IsQuickThemeSelectEnabled"
                                        class="form-check-input"
                                        type="checkbox"
                                        name="IsQuickThemeSelectEnabled"
                                        [(ngModel)]="settings.otherSettings.isQuickThemeSelectEnabled" />
                                    <span class="form-check-label">
                                        {{ 'IsQuickThemeSelectEnabled' | localize }}
                                    </span>
                                </label>
                            </tab>
                        }
                        @if (enabledSocialLoginSettings && enabledSocialLoginSettings.length) {
                            <tab
                                class="p-5"
                                heading="{{ 'ExternalLoginSettings' | localize }}"
                                id="externalLoginSettings">
                                <tabset class="d-flex flex-column flex-md-row" [vertical]="true" type="pills">
                                    @if (isSocialLoginEnabled('Facebook')) {
                                        <tab class="p-5" heading="Facebook">
                                            <label
                                                for="Settings_Facebook_UseHostSettings"
                                                class="form-check form-check-custom form-check-solid py-1">
                                                <input
                                                    id="Settings_Facebook_UseHostSettings"
                                                    class="form-check-input"
                                                    type="checkbox"
                                                    name="Settings_Facebook_UseHostSettings"
                                                    [(ngModel)]="useFacebookHostSettings"
                                                    (change)="clearFacebookSettings()" />
                                                <span class="form-check-label">
                                                    {{ 'UseHostSettings' | localize }}
                                                </span>
                                            </label>
                                            @if (!useFacebookHostSettings) {
                                                <div class="mt-3">
                                                    <label
                                                        for="Settings_Facebook_IsDeactivated"
                                                        class="form-check form-check-custom form-check-solid py-1">
                                                        <input
                                                            id="Settings_Facebook_IsDeactivated"
                                                            class="form-check-input"
                                                            type="checkbox"
                                                            name="Settings_Facebook_IsDeactivated"
                                                            [(ngModel)]="
                                                                this.settings.externalLoginProviderSettings
                                                                    .facebook_IsDeactivated
                                                            " />
                                                        <span class="form-check-label">
                                                            {{ 'Deactivate' | localize }}
                                                        </span>
                                                    </label>
                                                    <span class="form-text text-muted">
                                                        {{ 'SocialLoginDeactivate_Description' | localize }}
                                                    </span>
                                                    <div class="mb-5 mt-3">
                                                        <label class="form-label" for="Setting_Facebook_AppId">
                                                            {{ 'AppId' | localize }}*
                                                        </label>
                                                        <input
                                                            id="Setting_Facebook_AppId"
                                                            type="text"
                                                            class="form-control"
                                                            [(ngModel)]="
                                                                settings.externalLoginProviderSettings.facebook.appId
                                                            " />
                                                    </div>
                                                    <div class="mb-5">
                                                        <label class="form-label required">
                                                            {{ 'AppSecret' | localize }}
                                                        </label>
                                                        <password-input-with-show-button
                                                            [(data)]="
                                                                settings.externalLoginProviderSettings.facebook
                                                                    .appSecret
                                                            "></password-input-with-show-button>
                                                    </div>
                                                </div>
                                            }
                                        </tab>
                                    }
                                    @if (isSocialLoginEnabled('Google')) {
                                        <tab class="p-5" heading="Google">
                                            <label
                                                for="Settings_Google_UseHostSettings"
                                                class="form-check form-check-custom form-check-solid py-1">
                                                <input
                                                    id="Settings_Google_UseHostSettings"
                                                    class="form-check-input"
                                                    type="checkbox"
                                                    name="Settings_Google_UseHostSettings"
                                                    [(ngModel)]="useGoogleHostSettings"
                                                    (change)="clearGoogleSettings()" />
                                                <span class="form-check-label">
                                                    {{ 'UseHostSettings' | localize }}
                                                </span>
                                            </label>
                                            @if (!useGoogleHostSettings) {
                                                <div class="mt-3">
                                                    <label
                                                        for="Settings_Google_IsDeactivated"
                                                        class="form-check form-check-custom py-1">
                                                        <input
                                                            id="Settings_Google_IsDeactivated"
                                                            class="form-check-input"
                                                            type="checkbox"
                                                            name="Settings_Google_IsDeactivated"
                                                            [(ngModel)]="
                                                                this.settings.externalLoginProviderSettings
                                                                    .google_IsDeactivated
                                                            " />
                                                        <span class="form-check-label">
                                                            {{ 'Deactivate' | localize }}
                                                        </span>
                                                    </label>
                                                    <span class="form-text text-muted">
                                                        {{ 'SocialLoginDeactivate_Description' | localize }}
                                                    </span>
                                                    <div class="mb-5 mt-3">
                                                        <label class="form-label" for="Setting_Google_ClientId">
                                                            {{ 'ClientId' | localize }}*
                                                        </label>
                                                        <input
                                                            id="Setting_Google_ClientId"
                                                            type="text"
                                                            class="form-control"
                                                            [(ngModel)]="
                                                                settings.externalLoginProviderSettings.google.clientId
                                                            " />
                                                    </div>
                                                    <div class="mb-5">
                                                        <label class="form-label required">
                                                            {{ 'ClientSecret' | localize }}
                                                        </label>
                                                        <password-input-with-show-button
                                                            [(data)]="
                                                                settings.externalLoginProviderSettings.google
                                                                    .clientSecret
                                                            "></password-input-with-show-button>
                                                    </div>
                                                    <div class="mb-5">
                                                        <label class="form-label" for="Setting_Google_UserInfoEndpoint">
                                                            {{ 'UserInfoEndpoint' | localize }} *
                                                        </label>
                                                        <input
                                                            id="Setting_Google_UserInfoEndpoint"
                                                            type="text"
                                                            class="form-control"
                                                            [(ngModel)]="
                                                                settings.externalLoginProviderSettings.google
                                                                    .userInfoEndpoint
                                                            " />
                                                    </div>
                                                </div>
                                            }
                                        </tab>
                                    }
                                    @if (isSocialLoginEnabled('Microsoft')) {
                                        <tab class="p-5" heading="Microsoft">
                                            <label
                                                for="Settings_Microsoft_UseHostSettings"
                                                class="form-check form-check-custom form-check-solid py-1">
                                                <input
                                                    id="Settings_Microsoft_UseHostSettings"
                                                    class="form-check-input"
                                                    type="checkbox"
                                                    name="Settings_Microsoft_UseHostSettings"
                                                    [(ngModel)]="useMicrosoftHostSettings"
                                                    (change)="clearMicrosoftSettings()" />
                                                <span class="form-check-label">
                                                    {{ 'UseHostSettings' | localize }}
                                                </span>
                                            </label>
                                            @if (!useMicrosoftHostSettings) {
                                                <div class="mt-3">
                                                    <label
                                                        for="Settings_Microsoft_IsDeactivated"
                                                        class="form-check form-check-custom form-check-solid py-1">
                                                        <input
                                                            id="Settings_Microsoft_IsDeactivated"
                                                            class="form-check-input"
                                                            type="checkbox"
                                                            name="Settings_Microsoft_IsDeactivated"
                                                            [(ngModel)]="
                                                                this.settings.externalLoginProviderSettings
                                                                    .microsoft_IsDeactivated
                                                            " />
                                                        <span class="form-check-label">
                                                            {{ 'Deactivate' | localize }}
                                                        </span>
                                                    </label>
                                                    <span class="form-text text-muted">
                                                        {{ 'SocialLoginDeactivate_Description' | localize }}
                                                    </span>
                                                    <div class="mb-5 mt-3">
                                                        <label class="form-label" for="Setting_Microsoft_ClientId">
                                                            {{ 'ClientId' | localize }}*
                                                        </label>
                                                        <input
                                                            id="Setting_Microsoft_ClientId"
                                                            type="text"
                                                            class="form-control"
                                                            [(ngModel)]="
                                                                settings.externalLoginProviderSettings.microsoft
                                                                    .clientId
                                                            " />
                                                    </div>
                                                    <div class="mb-5">
                                                        <label class="form-label required">
                                                            {{ 'ClientSecret' | localize }}
                                                        </label>
                                                        <password-input-with-show-button
                                                            [(data)]="
                                                                settings.externalLoginProviderSettings.microsoft
                                                                    .clientSecret
                                                            "></password-input-with-show-button>
                                                    </div>
                                                </div>
                                            }
                                        </tab>
                                    }
                                    @if (isSocialLoginEnabled('WsFederation')) {
                                        <tab class="p-5" heading="WsFederation">
                                            <label
                                                for="Settings_WsFederation_UseHostSettings"
                                                class="form-check form-check-custom form-check-solid py-1">
                                                <input
                                                    id="Settings_WsFederation_UseHostSettings"
                                                    class="form-check-input"
                                                    type="checkbox"
                                                    name="Settings_WsFederation_UseHostSettings"
                                                    [(ngModel)]="useWsFederationHostSettings"
                                                    (change)="clearWsFederationSettings()" />
                                                <span class="form-check-label">
                                                    {{ 'UseHostSettings' | localize }}
                                                </span>
                                            </label>
                                            <div [class.d-none]="useWsFederationHostSettings" class="mt-3">
                                                <label
                                                    for="Settings_WsFederation_IsDeactivated"
                                                    class="form-check form-check-custom form-check-solid py-1">
                                                    <input
                                                        id="Settings_WsFederation_IsDeactivated"
                                                        class="form-check-input"
                                                        type="checkbox"
                                                        name="Settings_WsFederation_IsDeactivated"
                                                        [(ngModel)]="
                                                            this.settings.externalLoginProviderSettings
                                                                .wsFederation_IsDeactivated
                                                        " />
                                                    <span class="form-check-label">
                                                        {{ 'Deactivate' | localize }}
                                                    </span>
                                                </label>
                                                <span class="form-text text-muted">
                                                    {{ 'SocialLoginDeactivate_Description' | localize }}
                                                </span>
                                                <div class="mb-5 mt-3">
                                                    <label class="form-label" for="Setting_WsFederation_ClientId">
                                                        {{ 'ClientId' | localize }}
                                                    </label>
                                                    <input
                                                        id="Setting_WsFederation_ClientId"
                                                        type="text"
                                                        class="form-control"
                                                        [(ngModel)]="
                                                            settings.externalLoginProviderSettings.wsFederation.clientId
                                                        " />
                                                </div>
                                                <div class="mb-5">
                                                    <label class="form-label" for="Setting_WsFederation_Tenant">
                                                        {{ 'Tenant' | localize }}
                                                    </label>
                                                    <input
                                                        id="Setting_WsFederation_Tenant"
                                                        type="text"
                                                        class="form-control"
                                                        [(ngModel)]="
                                                            settings.externalLoginProviderSettings.wsFederation.tenant
                                                        " />
                                                </div>
                                                <div class="mb-5">
                                                    <label
                                                        class="form-label"
                                                        for="Setting_WsFederation_MetaDataAddress">
                                                        {{ 'MetaDataAddress' | localize }}
                                                    </label>
                                                    <input
                                                        id="Setting_WsFederation_MetaDataAddress"
                                                        type="text"
                                                        class="form-control"
                                                        [(ngModel)]="
                                                            settings.externalLoginProviderSettings.wsFederation
                                                                .metaDataAddress
                                                        " />
                                                </div>
                                                <div class="mb-5">
                                                    <label class="form-label" for="Setting_WsFederation_Wtrealm">
                                                        {{ 'Wtrealm' | localize }}
                                                    </label>
                                                    <input
                                                        id="Setting_WsFederation_Wtrealm"
                                                        type="text"
                                                        class="form-control"
                                                        [(ngModel)]="
                                                            settings.externalLoginProviderSettings.wsFederation.wtrealm
                                                        " />
                                                </div>
                                                <div class="mb-5">
                                                    <label class="form-label" for="Setting_WsFederation_Authority">
                                                        {{ 'Authority' | localize }}
                                                    </label>
                                                    <input
                                                        id="Setting_WsFederation_Authority"
                                                        type="text"
                                                        class="form-control"
                                                        [(ngModel)]="
                                                            settings.externalLoginProviderSettings.wsFederation
                                                                .authority
                                                        " />
                                                </div>
                                                <key-value-list-manager
                                                    #wsFederationClaimsMappingManager
                                                    [header]="l('ClaimsMapping')"
                                                    [keyPlaceHolder]="l('ClaimKey')"
                                                    [valuePlaceHolder]="l('ClaimValue')"
                                                    [items]="wsFederationClaimMappings"></key-value-list-manager>
                                            </div>
                                        </tab>
                                    }
                                    @if (isSocialLoginEnabled('OpenId')) {
                                        <tab class="p-5" heading="OpenId">
                                            <label
                                                for="Settings_OpenIdConnect_UseHostSettings"
                                                class="form-check form-check-custom form-check-solid py-1">
                                                <input
                                                    id="Settings_OpenIdConnect_UseHostSettings"
                                                    class="form-check-input"
                                                    type="checkbox"
                                                    name="Settings_OpenIdConnect_UseHostSettings"
                                                    [(ngModel)]="useOpenIdConnectHostSettings"
                                                    (change)="clearOpenIdSettings()" />
                                                <span class="form-check-label">
                                                    {{ 'UseHostSettings' | localize }}
                                                </span>
                                            </label>
                                            <div [class.d-none]="useOpenIdConnectHostSettings" class="mt-3">
                                                <label
                                                    for="Settings_OpenIdConnect_IsDeactivated"
                                                    class="form-check form-check-custom form-check-solid py-1">
                                                    <input
                                                        id="Settings_OpenIdConnect_IsDeactivated"
                                                        class="form-check-input"
                                                        type="checkbox"
                                                        name="Settings_OpenIdConnect_IsDeactivated"
                                                        [(ngModel)]="
                                                            this.settings.externalLoginProviderSettings
                                                                .openIdConnect_IsDeactivated
                                                        " />
                                                    <span class="form-check-label">
                                                        {{ 'Deactivate' | localize }}
                                                    </span>
                                                </label>
                                                <span class="form-text text-muted">
                                                    {{ 'SocialLoginDeactivate_Description' | localize }}
                                                </span>
                                                <div class="mb-5 mt-3">
                                                    <label class="form-label" for="Setting_OpenIdConnect_ClientId">
                                                        {{ 'ClientId' | localize }}
                                                    </label>
                                                    <input
                                                        id="Setting_OpenIdConnect_ClientId"
                                                        type="text"
                                                        class="form-control"
                                                        [(ngModel)]="
                                                            settings.externalLoginProviderSettings.openIdConnect
                                                                .clientId
                                                        " />
                                                </div>
                                                <div class="mb-5">
                                                    <label class="form-label" for="Setting_OpenIdConnect_ClientSecret">
                                                        {{ 'ClientSecret' | localize }}
                                                    </label>
                                                    <input
                                                        id="Setting_OpenIdConnect_ClientSecret"
                                                        type="text"
                                                        class="form-control"
                                                        [(ngModel)]="
                                                            settings.externalLoginProviderSettings.openIdConnect
                                                                .clientSecret
                                                        " />
                                                </div>
                                                <div class="mb-5">
                                                    <label class="form-label" for="Setting_OpenIdConnect_Authority">
                                                        {{ 'Authority' | localize }}
                                                    </label>
                                                    <input
                                                        id="Setting_OpenIdConnect_Authority"
                                                        type="text"
                                                        class="form-control"
                                                        [(ngModel)]="
                                                            settings.externalLoginProviderSettings.openIdConnect
                                                                .authority
                                                        " />
                                                </div>
                                                <div class="mb-5">
                                                    <label class="form-label" for="Setting_OpenIdConnect_LoginUrl">
                                                        {{ 'LoginUrl' | localize }}
                                                    </label>
                                                    <input
                                                        id="Setting_OpenIdConnect_LoginUrl"
                                                        type="text"
                                                        class="form-control"
                                                        [(ngModel)]="
                                                            settings.externalLoginProviderSettings.openIdConnect
                                                                .loginUrl
                                                        " />
                                                </div>
                                                <label
                                                    for="Setting_OpenIdConnect_ValidateIssuer"
                                                    class="form-check form-check-custom form-check-solid mb-3"
                                                    style="margin-bottom: 0">
                                                    <input
                                                        id="Setting_OpenIdConnect_ValidateIssuer"
                                                        class="form-check-input"
                                                        type="checkbox"
                                                        name="AllowSelfRegistration"
                                                        [(ngModel)]="
                                                            settings.externalLoginProviderSettings.openIdConnect
                                                                .validateIssuer
                                                        " />
                                                    <span class="form-check-label">
                                                        {{ 'ValidateIssuer' | localize }}
                                                    </span>
                                                </label>
                                                <div class="mb-5 mt-5">
                                                    <label class="form-label">{{ 'ResponseType' | localize }}</label>
                                                    <div class="checkbox-inline d-flex">
                                                        <label
                                                            for="Setting_OpenIdConnect_ResponseType_Code"
                                                            class="form-check form-check-custom form-check-solid mb-3 me-3"
                                                            style="margin-bottom: 0">
                                                            <input
                                                                id="Setting_OpenIdConnect_ResponseType_Code"
                                                                class="form-check-input"
                                                                type="checkbox"
                                                                name="Setting_OpenIdConnect_ResponseType_Code"
                                                                [(ngModel)]="openIdConnectResponseTypeCode" />
                                                            <span class="form-check-label">code</span>
                                                        </label>
                                                        <label
                                                            for="Setting_OpenIdConnect_ResponseType_Token"
                                                            class="form-check form-check-custom form-check-solid mb-3 me-3"
                                                            style="margin-bottom: 0">
                                                            <input
                                                                id="Setting_OpenIdConnect_ResponseType_Token"
                                                                class="form-check-input"
                                                                type="checkbox"
                                                                name="Setting_OpenIdConnect_ResponseType_Token"
                                                                [(ngModel)]="openIdConnectResponseTypeToken" />
                                                            <span class="form-check-label">token</span>
                                                        </label>
                                                        <label
                                                            for="Setting_OpenIdConnect_ResponseType_IdToken"
                                                            class="form-check form-check-custom form-check-solid mb-3"
                                                            style="margin-bottom: 0">
                                                            <input
                                                                id="Setting_OpenIdConnect_ResponseType_IdToken"
                                                                class="form-check-input"
                                                                type="checkbox"
                                                                name="Setting_OpenIdConnect_ResponseType_IdToken"
                                                                [(ngModel)]="openIdConnectResponseTypeIdToken" />
                                                            <span class="form-check-label">id_token</span>
                                                        </label>
                                                    </div>
                                                    <small>{{ 'ResponseType_Description' | localize }}</small>
                                                </div>
                                                <key-value-list-manager
                                                    #openIdConnectClaimsMappingManager
                                                    [header]="l('ClaimsMapping')"
                                                    [keyPlaceHolder]="l('ClaimKey')"
                                                    [valuePlaceHolder]="l('ClaimValue')"
                                                    [items]="openIdConnectClaimMappings"></key-value-list-manager>
                                            </div>
                                        </tab>
                                    }
                                    @if (isSocialLoginEnabled('Twitter')) {
                                        <tab class="p-5" heading="Twitter">
                                            <label
                                                for="Settings_Twitter_UseHostSettings"
                                                class="form-check form-check-custom form-check-solid py-1">
                                                <input
                                                    id="Settings_Twitter_UseHostSettings"
                                                    class="form-check-input"
                                                    type="checkbox"
                                                    name="Settings_Twitter_UseHostSettings"
                                                    [(ngModel)]="useTwitterHostSettings"
                                                    (change)="clearTwitterSettings()" />
                                                <span class="form-check-label">
                                                    {{ 'UseHostSettings' | localize }}
                                                </span>
                                            </label>
                                            @if (!useTwitterHostSettings) {
                                                <div class="mt-3">
                                                    <label
                                                        for="Settings_Twitter_IsDeactivated"
                                                        class="form-check form-check-custom form-check-solid py-1">
                                                        <input
                                                            id="Settings_Twitter_IsDeactivated"
                                                            class="form-check-input"
                                                            type="checkbox"
                                                            name="Settings_Twitter_IsDeactivated"
                                                            [(ngModel)]="
                                                                this.settings.externalLoginProviderSettings
                                                                    .twitter_IsDeactivated
                                                            " />
                                                        <span class="form-check-label">
                                                            {{ 'Deactivate' | localize }}
                                                        </span>
                                                    </label>
                                                    <span class="form-text text-muted">
                                                        {{ 'SocialLoginDeactivate_Description' | localize }}
                                                    </span>
                                                    <div class="mb-5 mt-3">
                                                        <label class="form-label" for="Setting_Twitter_ConsumerKey">
                                                            {{ 'ConsumerKey' | localize }}*
                                                        </label>
                                                        <input
                                                            id="Setting_Twitter_ConsumerKey"
                                                            type="text"
                                                            class="form-control"
                                                            [(ngModel)]="
                                                                settings.externalLoginProviderSettings.twitter
                                                                    .consumerKey
                                                            " />
                                                    </div>
                                                    <div class="mb-5">
                                                        <label class="form-label required">
                                                            {{ 'ConsumerSecret' | localize }}
                                                        </label>
                                                        <password-input-with-show-button
                                                            [(data)]="
                                                                settings.externalLoginProviderSettings.twitter
                                                                    .consumerSecret
                                                            "></password-input-with-show-button>
                                                    </div>
                                                </div>
                                            }
                                        </tab>
                                    }
                                </tabset>
                            </tab>
                        }
                    </tabset>
                }
            </div>
            <div role="actions" class="card-footer">
                <button class="btn btn-primary ms-5" (click)="saveAll()">
                    <i class="la la-floppy-o"></i>
                    {{ 'SaveAll' | localize }}
                </button>
            </div>
        </div>
    </div>
</div>
