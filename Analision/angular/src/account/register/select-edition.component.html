<div [@routerTransition]>
    <div [class]="containerClass">
        <div class="card shadow-lg">
            <div class="card-body">
                <div class="row text-center mt-10 mb-0 pricing-items">
                    <div class="w-100" style="text-align: -webkit-center">
                        <div
                            class="nav bg-light rounded-pill px-3 py-2 mb-15 w-225px justify-content-center"
                            data-kt-buttons="true">
                            <!--begin::Nav link-->
                            <button
                                class="nav-link btn btn-active btn-active-dark fw-bold btn-color-gray-600 py-3 px-5 m-1 rounded-pill active"
                                (click)="changePaymentPeriodType('monthly')">
                                {{ 'Monthly' | localize }}
                            </button>
                            <!--end::Nav link-->

                            <!--begin::Nav link-->
                            <button
                                class="nav-link btn btn-active btn-active-dark fw-bold btn-color-gray-600 py-3 px-5 m-1 rounded-pill"
                                (click)="changePaymentPeriodType('annual')">
                                {{ 'Annual' | localize }}
                            </button>
                            <!--end::Nav link-->
                        </div>
                    </div>
                </div>
                <div class="row justify-content-center mt-10 mb-0 pricing-items">
                    @for (editionWithFeatures of editionsSelectOutput.editionsWithFeatures; track editionWithFeatures) {
                        <div class="col-xl-4">
                            <div class="d-flex h-100 align-items-center">
                                <div
                                    class="w-100 d-flex flex-column flex-center rounded-3 bg-light bg-opacity-75 py-15 px-10 mb-10">
                                    <div class="mb-7 text-center">
                                        <h1 class="text-gray-900 mb-5 fw-bolder">
                                            {{ editionWithFeatures.edition.displayName }}
                                        </h1>
                                        @if (isFree(editionWithFeatures.edition)) {
                                            <div class="text-center">
                                                <span class="fs-3x fw-bold text-primary">
                                                    {{ 'Free' | localize }}
                                                </span>
                                            </div>
                                        }
                                        @if (!isFree(editionWithFeatures.edition)) {
                                            <div class="text-center">
                                                <span class="mb-2 text-primary">
                                                    {{ appSession.application.currencySign }}
                                                </span>
                                                <!-- prettier-ignore -->
                                                @if (paymentPeriodType == 'monthly') {
                          <span class="fs-3x fw-bold text-primary">{{ editionWithFeatures.edition.monthlyPrice | number: '.2' }}</span>
                        }
                                                <!-- prettier-ignore -->
                                                @if (paymentPeriodType == 'annual') {
                          <span class="fs-3x fw-bold text-primary">{{ editionWithFeatures.edition.annualPrice | number: '.2' }}</span>
                        }
                                            </div>
                                        }
                                    </div>
                                    <div class="w-100 mb-10">
                                        @for (feature of editionsSelectOutput.allFeatures; track feature) {
                                            <div class="d-flex align-items-center mb-5">
                                                <span class="fw-semibold fs-6 text-gray-800 flex-grow-1 pe-3">
                                                    {{ feature.displayName }}
                                                </span>
                                                @if (
                                                    isTrueFalseFeature(feature) &&
                                                    featureEnabledForEdition(feature, editionWithFeatures)
                                                ) {
                                                    <i class="far fa-check-circle text-success fs-1"></i>
                                                }
                                                @if (
                                                    isTrueFalseFeature(feature) &&
                                                    !featureEnabledForEdition(feature, editionWithFeatures)
                                                ) {
                                                    <i class="far fa-times-circle text-muted fs-1"></i>
                                                }
                                                @if (!isTrueFalseFeature(feature)) {
                                                    <span class="text-success text-left">
                                                        {{ getFeatureValueForEdition(feature, editionWithFeatures) }}
                                                    </span>
                                                }
                                            </div>
                                        }
                                    </div>
                                    <div>
                                        <!-- Get Started Button -->
                                        @if (!isUserLoggedIn && isFree(editionWithFeatures.edition)) {
                                            <a
                                                class="btn btn-success btn-sm me-2 mb-2"
                                                [routerLink]="['/account/register-tenant']"
                                                [queryParams]="{
                                                    editionId: editionWithFeatures.edition.id,
                                                    subscriptionStartType: subscriptionStartType.Free,
                                                }"
                                                href="#">
                                                {{ 'GetStarted' | localize }}
                                            </a>
                                        }
                                        <!-- Free Trial Button -->
                                        @if (
                                            !isUserLoggedIn &&
                                            !isFree(editionWithFeatures.edition) &&
                                            editionWithFeatures.edition.trialDayCount
                                        ) {
                                            <a
                                                class="btn btn-warning btn-sm me-2 mb-2"
                                                [routerLink]="['/account/register-tenant']"
                                                [queryParams]="{
                                                    editionId: editionWithFeatures.edition.id,
                                                    subscriptionStartType: subscriptionStartType.Trial,
                                                }"
                                                href="#">
                                                {{ 'FreeTrial' | localize }}
                                            </a>
                                        }
                                        <!-- Buy Button -->
                                        @if (!isUserLoggedIn && !isFree(editionWithFeatures.edition)) {
                                            <a
                                                class="btn btn-primary btn-sm me-2 mb-2 buy-now"
                                                [routerLink]="['/account/register-tenant']"
                                                [queryParams]="{
                                                    editionId: editionWithFeatures.edition.id,
                                                    subscriptionStartType: subscriptionStartType.Paid,
                                                    paymentPeriodType: paymentPeriodType,
                                                }"
                                                href="#">
                                                {{ 'BuyNow' | localize }}
                                            </a>
                                        }
                                    </div>
                                </div>
                            </div>
                        </div>
                    }
                </div>
            </div>
        </div>
    </div>
</div>
